---
output:
  html_document:
    variant: markdown_github
    keep_md: true
  md_document:
    variant: markdown_github
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
library(knitr)
opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  fig.align = "center",
  fig.retina = 2,
  out.width = "75%",
  dpi = 96
)
knit_hooks$set(pngquant = hook_pngquant)
```

# backtestPortfolio

Backtest of a portfolio design with real data taken randomly from different
markets and selecting randomly a subset of stocks for proper assessments.
It also allows to backtest multiple portfolio designs and rank them based
on a number of criteria including expected return, Sharpe ratio, drawdown,
etc.


## Installation
```{r, eval = FALSE}
# install.packages("devtools")
devtools::install_github("dppalomar/backtestPortfolio")

# Getting help
library(backtestPortfolio)
help(package = "backtestPortfolio")
package?backtestPortfolio
?backtestPortfolio
?prices
```



## Usage of `backtestPortfolio()`
We start by loading the package and some market data from the underlying assets of the S&P 500:
```{r, message = FALSE}
library(backtestPortfolio)
library(xts)
data(prices)
```
The list `prices` contains random selections of $N=50$ stocks for periods of two years from the S&P 500.
```{r}
length(prices)
str(prices[[1]])

colnames(prices[[1]])
```

Now, we define some portfolio design that takes as input the prices and outputs the portfolio vector `w`:
```{r, message=FALSE}
portfolio_fun <- function(prices) {
  X <- diff(log(prices))[-1]  # compute log returns
  Sigma <- cov(X)  # compute SCM
  # design GMVP
  w <- solve(Sigma, rep(1, nrow(Sigma)))
  w <- w/sum(w)
  return(w)
}
```

We are then ready to use the function `backtestPortfolio()` that will execute the portfolio design function on a rolling-window basis:
```{r, eval=FALSE}
res <- backtestPortfolio(portfolio_fun, prices[[1]])
print(res)
```



## Links
Package: [GitHub](https://github.com/dppalomar/backtestPortfolio).  
README file: [GitHub-readme](https://rawgit.com/dppalomar/backtestPortfolio/master/README.html).
